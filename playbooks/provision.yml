---
- name: provision
  hosts: elkservers
  become: yes
  roles:
    - role: geerlingguy.security

    - role: geerlingguy.postgresql

    - role: postgresql-odoo

    - role: coopdevs.certbot_nginx
      vars:
        domain_name: "{{ inventory_hostname }}"
        letsencrypt_email: "{{ certificate_authority_email }}"
      when: not development_environment

    - role: jdauphant.nginx
      when: not development_environment

    - role: coopdevs.odoo-role
      vars:
        odoo_role_odoo_db_admin_password: "{{ odoo_db_admin_password }}"
        odoo_role_odoo_core_modules: "{{ odoo_core_modules }}"
        odoo_role_odoo_db_name: "{{ odoo_db_name }}"
        odoo_role_odoo_edition: "{{ odoo_edition }}"
